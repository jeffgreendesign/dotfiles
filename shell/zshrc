# ~/.zshrc - Zsh configuration
# Install: ln -sf ~/dotfiles/shell/zshrc ~/.zshrc

# Dotfiles directory (can be overridden)
export DOTFILES_DIR="${DOTFILES_DIR:-$HOME/dotfiles}"

# Path to your oh-my-zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="robbyrussell"  # TODO: Customize or use starship

# Oh My Zsh plugins
# Standard plugins: $ZSH/plugins/
# Custom plugins: $ZSH_CUSTOM/plugins/
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
  # TODO: Add your preferred plugins
)

# Load Oh My Zsh if installed
if [ -f "$ZSH/oh-my-zsh.sh" ]; then
  source "$ZSH/oh-my-zsh.sh"
else
  echo "Oh My Zsh not found at $ZSH (skipping). Install it or run \"$DOTFILES_DIR/scripts/restore.sh\"."
fi

# User configuration

# Preferred editor (fallback to vim if VS Code CLI not available)
if command -v code >/dev/null 2>&1; then
  export EDITOR='code --wait'
  export VISUAL='code --wait'
else
  export EDITOR='vim'
  export VISUAL='vim'
fi

# Load aliases
if [ -f "$DOTFILES_DIR/shell/aliases.sh" ]; then
  source "$DOTFILES_DIR/shell/aliases.sh"
fi

# Load functions
if [ -f "$DOTFILES_DIR/shell/functions.sh" ]; then
  source "$DOTFILES_DIR/shell/functions.sh"
fi

# Homebrew (macOS Intel)
if [ -d "/usr/local/bin" ]; then
  export PATH="/usr/local/bin:$PATH"
fi

# Homebrew (macOS Apple Silicon)
if [ -d "/opt/homebrew/bin" ]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# Node version manager (if using nvm)
# export NVM_DIR="$HOME/.nvm"
# [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
# [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# TODO: Add your custom PATH additions, environment variables, etc.
